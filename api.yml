parameters:
  sessionId:
    name: x-travels-token
    description: The Session ID of an authorized user
    in: header
    required: true
    type: string

  offset:
    name: offset
    description: The starting position to query from or the amount of records(rows) to skip. Default is 0.
    in: path
    required: false
    type: integer
    format: int32
    minimum: 0

  limit:
    name: limit
    description: The total amount of records to retrieve. Default is 10.
    in: path
    required: false
    type: integer
    format: int32
    maximum: 20

  req_id:
    name: id
    type: integer
    in: path
    required: true
    description: "The travel request id"

  req_status:
    name: statusId
    in: path
    type: integer
    format: int32
    maximum: 2
    required: true
    enum: [0, 1, 2]
    description: "The status of the travel request. 0 = for Pending Approval,
     1 = Approved, 2 = Rejected"

  usr_id:
    name: userId
    type: integer
    required: true
    in: path
    description: The user id

#----------------------Definitions-------------------------------
definitions:
  loginInput:
    type: object
    required:
    - username
    - password
    properties:
      username:
        type: string
      password:
        type: string
        format: password

  loginOutput:
    type: object
    properties:
      status:
        type: string
      data:
        type: object
        properties:
          user:
            $ref: '#/definitions/User'
          token:
            type: string
    required:
      - status
      - data


  postUserInput:
    required:
      - email
      - username
      - password
      - first_name
      - last_name
      - middle_name
      - gender
    properties:
      email:
        type: string
        format: email
      username:
        type: string
      password:
        type: string
      first_name:
        type: string
      last_name:
        type: string
      middle_name:
        type: string
      user_type:
        type: string
        enum:
        - regular
        - admin
      gender:
        type: string
        enum: ['M', 'F', 'O']


  postUserOutput:
    type: object
    properties:
      status:
        type: string
      data:
        $ref: '#/definitions/postUserInput'
    required:
      - data
      - status

  getUserOutput:
    type: object
    properties:
      status:
        type: string
      data:
        type: object
        properties:
          items:
            type: array
            items:
              $ref: '#/definitions/User'
    required:
      - data
      - status

  User:
    required:
      - id
      - username
      - first_name
      - last_name
      - email
      - created_at
      - updated_at
    properties:
      id:
        type: string
      username:
        type: string
      first_name:
        type: string
      last_name:
        type: string
      email:
        type: string
      gender:
        type: string
      created_at:
        type: string
        format: date
      updated_at:
        type: string
        format: date

  postRequestInput:
    type: "object"
    description: "A new Travel Request Object"
    required:
    - "manager_id"
    - "arrangements"
    - "reasons"
    - "departure_city"
    - "arrival_city"
    - "departure_date"
    - "return_date"
    properties:
      manager_id:
        description: "The Manager you are sending this request to for approval.
                      Basically you should be sending user id of the manager."
        type: integer
      arrangements:
        description: A list of arrangements needed for this travel. Must be a either of <b>Flight, Hotel,
            Rental Car</b> or <b>Taxi Service</b>
        type: array
        items:
          type: string
      reasons:
        description: The reasons/purpose for this travel request
        type: string
      departure_city:
        description: The city of take off. Which city will you be taking off from?
        type: string
      arrival_city:
        description: The intended city to visit. Which city are you visiting?
        type: string
      departure_date:
        description: The intended date for departure. When will you be leaving your current city?
        type: string
        format: date-tim
      return_date:
        description: The intended date to return. When will you likely return from your visit?
        type: string
        format: date-time

  postRequestOutput:
    type: object
    properties:
      status:
        type: string
      data:
        $ref: '#/definitions/postRequestInput'
    required:
      - data
      - status

  getRequestOutput:
    type: object
    properties:
      status:
        type: string
      data:
        type: object
        properties:
          items:
            type: array
            items:
              $ref: '#/definitions/TravelRequest'
    required:
      - data
      - status

  TravelRequest:
    description: A representation of a Travel Request Object
    allOf:
      - $ref: '#/definitions/postRequestInput'
      - type: object
        properties:
          id:
            type: integer
            description: The Travel Request ID
          staff_id:
            type: integer
            description: The Staff that requested for this Travel
          status:
            type: integer
            description: The Request Status
            enum:
              - 0
              - 1
              - 2
          approved_by:
            type: integer
          created_at:
            type: string
            format: date-time
            description: The date this request was created
          updated_at:
            type: string
            format: date-time
            description: The date this request was updated


  Staff:
    description: A representation of a Staff object
    properties:
      id:
        type: integer
        description: The staff id
      user_id:
        type: integer
        description: The user id
      emp_no:
        type: string
        description: The employee no
      birth_date:
        type: string
        description: The Employee Birth Date
      employment_date:
        type: string
        format: date
        description: The Employment Date
      created_at:
        type: string
        format: date-time
        description: The date this staff was created
      updated_at:
        type: string
        format: date-time
        description: The date this staff was updated

  postStaffInput:
    type: object
    required:
      - user_id
      - emp_no
      - birth_date
    properties:
      user_id:
        type: integer
      emp_no:
        type: string
      birth_date:
        type: string
        format: date
      employment_date:
        type: string
        format: date

  postStaffOutput:
      type: object
      properties:
        status:
          type: string
        data:
          $ref: '#/definitions/postStaffInput'
      required:
        - data
        - status


  getStaffOutput:
    type: object
    properties:
      status:
        type: string
      data:
        type: object
        properties:
          items:
            type: array
            items:
              $ref: '#/definitions/Staff'
    required:
      - data
      - status

  UserStaffDetails:
    properties:
      staff:
        $ref: '#/definitions/Staff'
      user:
        type: object
        $ref: '#/definitions/User'
      departments:
        type: array
        items:
          $ref: '#/definitions/Department'
      managers:
        type: array
        items:
          $ref: '#/definitions/DepartmentManager'


  getUserStaffDetailsOutput:
    type: object
    properties:
      status:
        type: string
      data:
        type: object
        properties:
          items:
            type: array
            items:
              $ref: '#/definitions/UserStaffDetails'
    required:
    - status
    - data

  Department:
    properties:
      id:
        type: integer
        description: The department id
      name:
        type: string
        description: The department name
      created_at:
        type: string
        format: date-time
        description: The date this department was created
      updated_at:
        type: string
        format: date-time
        description: The date this department was updated

  getDepartmentsOutput:
    type: object
    properties:
      status:
        type: string
      data:
        type: object
        properties:
          items:
            type: array
            items:
              $ref: '#/definitions/Department'
    required:
    - status
    - data

  StaffManager:
    type: object
    properties:
      staff_id:
        type: integer
      managers:
        type: array
        items:
          type: object
          $ref: '#/definitions/Staff'
          properties:
            department:
              $ref: '#/definitions/Department'

  DepartmentManager:
    type: object
    properties:
      dept_id:
        type: integer
        description: Department ID
      manager:
        type: array
        items:
          $ref: '#/definitions/Staff'

  DepartmentStaff:
    type: object
    properties:
      dept_id:
        type: integer
        description: Department ID
      staffs:
        type: array
        items:
          $ref: '#/definitions/Staff'

  getStaffDepartmentsOutput:
    type: object
    properties:
      status:
        type: string
      data:
        type: object
        properties:
          items:
            type: array
            items:
              type: object
              properties:
                staff_id:
                  type: integer
                departments:
                  type: array
                  items:
                    $ref: '#/definitions/Department'
    required:
    - status
    - data

  getStaffManagersOutput:
    type: object
    properties:
      status:
        type: string
      data:
        type: object
        properties:
          items:
            type: array
            items:
              $ref: '#/definitions/StaffManager'
    required:
    - status
    - data


  getDepartmentStaffsOutput:
    type: object
    properties:
      status:
        type: string
      data:
        type: object
        properties:
          items:
            type: array
            items:
              $ref: '#/definitions/DepartmentStaff'

  getDepartmentManagerOutput:
    type: object
    properties:
      status:
        type: string
      data:
        type: object
        properties:
          items:
            type: array
            items:
              $ref: '#/definitions/DepartmentManager'